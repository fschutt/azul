[workspace]
resolver = "2"
members = [
    "examples/rust", # Rust examples - depends on azul-dll
    "dll", # dll module with auto-gen C functions (optional pyO3 support), depends on layout, core and css
    "doc", # doc / test generator, depends on layout, core and css
    "layout", # layout depends on core + css
    "core", # core depends on css
    "css", # CSS parser, does not depend on anything else
    # "workbench", # azul workbench, HTML to Rust compiler
]

[workspace.dependencies]
glean = "60.5.0"
gleam = "0.15.1"

[profile.release]
opt-level = 3
debug = 1         # Line-level debug info only (smaller than full debug=2).
strip = false     # Don't strip symbols so samply can resolve them.
lto = false       # Disable LTO temporarily (saves disk space for profiling).
codegen-units = 1 # Reduces parallel builds but allows better optimization.
panic = "abort"   # Removes stack unwinding code (drastic size reduction).

[profile.coverage]
inherits = "release"
strip = false     # Keep symbols for grcov source mapping.
debug = true      # Full debug info for line-level coverage.
lto = false       # Disable LTO so grcov can see individual object files.
codegen-units = 16
panic = "unwind"  # Tests need unwinding for #[should_panic] etc.
