# Cross-compilation configuration for Azul
# This allows building Linux and Windows targets from macOS

# =============================================================================
# Linux Cross-Compilation Setup (x86_64-unknown-linux-gnu)
# =============================================================================
#
# REQUIRED: Install the Linux cross-compilation toolchain:
#
#   brew tap messense/macos-cross-toolchains
#   brew install x86_64-unknown-linux-gnu
#
# This installs:
#   - x86_64-unknown-linux-gnu-gcc (C compiler)
#   - x86_64-unknown-linux-gnu-g++ (C++ compiler)
#   - x86_64-unknown-linux-gnu-ar (archiver)
#   - Complete Linux glibc headers and libraries
#
# After installation, you can build for Linux:
#   cd dll
#   cargo build --release --bin kitchen_sink --target x86_64-unknown-linux-gnu
#
# The resulting binary will be at:
#   target/x86_64-unknown-linux-gnu/release/kitchen_sink
#
# =============================================================================

[target.x86_64-unknown-linux-gnu]
linker = "x86_64-unknown-linux-gnu-gcc"

# =============================================================================
# Windows Cross-Compilation Setup (x86_64-pc-windows-gnu)
# =============================================================================
#
# REQUIRED: Install MinGW-w64 for Windows cross-compilation:
#
#   brew install mingw-w64
#
# This installs:
#   - x86_64-w64-mingw32-gcc (C compiler)
#   - x86_64-w64-mingw32-g++ (C++ compiler)
#   - x86_64-w64-mingw32-ar (archiver)
#   - Complete Windows headers and libraries
#
# After installation, you can build for Windows:
#   cd dll
#   cargo build --release --bin kitchen_sink --target x86_64-pc-windows-gnu
#
# The resulting binary will be at:
#   target/x86_64-pc-windows-gnu/release/kitchen_sink.exe
#
# =============================================================================

[target.x86_64-pc-windows-gnu]
linker = "x86_64-w64-mingw32-gcc"
ar = "x86_64-w64-mingw32-ar"

# =============================================================================
# Release Profile Optimizations
# =============================================================================
#
# These settings optimize release builds for size and performance:
# - lto = "thin": Enables thin link-time optimization (faster than "fat", good size reduction)
# - codegen-units = 16: Balances compile time vs optimization (lower = more optimization, slower build)
#
# For maximum optimization (slower build):
#   lto = "fat"
#   codegen-units = 1
#
# =============================================================================

[profile.release]
lto = "thin"
codegen-units = 16
